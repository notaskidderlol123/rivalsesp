-- Rivals ESP Script (Box, Bone, Distance, Health, Tracers)
local players = game:GetService("Players")
local runService = game:GetService("RunService")
local camera = game:GetService("Workspace").CurrentCamera
local localPlayer = players.LocalPlayer

-- Color settings
local espColor = Color3.fromRGB(255, 0, 0) -- Red for enemies
local healthColor = Color3.fromRGB(0, 255, 0) -- Green for full health
local tracerColor = Color3.fromRGB(0, 0, 255) -- Blue for tracers

-- Function to create ESP elements
function createESP(player)
    if player == localPlayer then return end
    local character = player.Character
    if not character then return end

    -- Create ESP UI elements
    local billboard = Instance.new("BillboardGui", character)
    billboard.Size = UDim2.new(2, 0, 2, 0)
    billboard.Adornee = character:FindFirstChild("HumanoidRootPart")
    billboard.AlwaysOnTop = true
    billboard.StudsOffset = Vector3.new(0, 3, 0)

    local frame = Instance.new("Frame", billboard)
    frame.Size = UDim2.new(1, 0, 1, 0)
    frame.BackgroundColor3 = espColor
    frame.BorderSizePixel = 1

    -- Health Bar
    local healthBar = Instance.new("Frame", frame)
    healthBar.Size = UDim2.new(1, 0, 0.2, 0)
    healthBar.Position = UDim2.new(0, 0, 1.1, 0)
    healthBar.BackgroundColor3 = healthColor

    -- Distance ESP
    local distanceText = Instance.new("TextLabel", frame)
    distanceText.Size = UDim2.new(1, 0, 0.2, 0)
    distanceText.Position = UDim2.new(0, 0, -0.5, 0)
    distanceText.TextColor3 = Color3.fromRGB(255, 255, 255)
    distanceText.BackgroundTransparency = 1
    distanceText.TextScaled = true
    distanceText.Text = "Distance: 0m"

    -- Tracer ESP
    local tracer = Drawing.new("Line")
    tracer.Thickness = 2
    tracer.Color = tracerColor

    -- Bone ESP
    local bones = {"Head", "Torso", "Left Arm", "Right Arm", "Left Leg", "Right Leg"}
    local boneLines = {}

    for i = 1, #bones do
        local part = character:FindFirstChild(bones[i])
        if part then
            local attachment = Instance.new("Attachment", part)
            local beam = Instance.new("Beam")
            beam.Parent = part
            beam.Attachment0 = attachment
            beam.Attachment1 = attachment
            beam.Color = ColorSequence.new(Color3.fromRGB(0, 255, 0))
            beam.FaceCamera = true
            beam.Width0 = 0.1
            beam.Width1 = 0.1
            table.insert(boneLines, beam)
        end
    end

    -- Update ESP on Render
    runService.RenderStepped:Connect(function()
        if character and character:FindFirstChild("HumanoidRootPart") then
            local rootPart = character:FindFirstChild("HumanoidRootPart")
            local distance = (camera.CFrame.Position - rootPart.Position).Magnitude
            distanceText.Text = "Distance: " .. math.floor(distance) .. "m"

            -- Health Bar Update
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                local healthPercent = humanoid.Health / humanoid.MaxHealth
                healthBar.Size = UDim2.new(healthPercent, 0, 0.2, 0)
                healthBar.BackgroundColor3 = Color3.fromRGB(255 * (1 - healthPercent), 255 * healthPercent, 0)
            end

            -- Update Tracer
            local screenPos, onScreen = camera:WorldToViewportPoint(rootPart.Position)
            if onScreen then
                tracer.From = Vector2.new(camera.ViewportSize.X / 2, camera.ViewportSize.Y)
                tracer.To = Vector2.new(screenPos.X, screenPos.Y)
                tracer.Visible = true
            else
                tracer.Visible = false
            end
        else
            tracer.Visible = false
        end
    end)
end

-- Apply ESP to all players/NPCs
for _, player in pairs(players:GetPlayers()) do
    if player.Character then
        createESP(player)
    end
end

-- Update when new players join
players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        createESP(player)
    end)
end)
